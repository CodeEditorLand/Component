import{d as e,m as t,u as n,b as r,e as i,o as a,f as o,s,j as l,k as u,n as c,p as d,t as g,q as f,i as m,c as v,v as p,w as y}from"./web.DaolkRLm.js";import{e as h}from"./editor.main.BPk8UX4_.js";import"./preload-helper.D21cck6N.js";function b(t){const[n,r]=e(t);return{get:n,set:r}}function A(e){const a=function({initialValues:e={},validateOn:t="submit",revalidateOn:n="input",validate:r}={}){const i=b([]),a=b([]),o=b(),s=b(0),l=b(!1),u=b(!1),c=b(!1),d=b(!1),g=b(!1),f=b(!1),m=b({});return{internal:{initialValues:e,validate:r,validateOn:t,revalidateOn:n,fieldNames:i,fieldArrayNames:a,element:o,submitCount:s,submitting:l,submitted:u,validating:c,touched:d,dirty:g,invalid:f,response:m,fields:{},fieldArrays:{},validators:new Set},get element(){return o.get()},get submitCount(){return s.get()},get submitting(){return l.get()},get submitted(){return u.get()},get validating(){return c.get()},get touched(){return d.get()},get dirty(){return g.get()},get invalid(){return f.get()},get response(){return m.get()}}}(e);return[a,{Form:e=>function(e){const[,i,a]=s(e,["of"],["keepResponse","shouldActive","shouldTouched","shouldDirty","shouldFocus"]);return o=l(H),"function"==typeof(g=e.of.internal.element.set)?u(g,o):e.of.internal.element.set=o,c(o,t(a,{onSubmit:async t=>{t.preventDefault();const{of:a,onSubmit:o,responseDuration:s}=e;r((()=>{i.keepResponse||a.internal.response.set({}),a.internal.submitCount.set((e=>e+1)),a.internal.submitted.set(!0),a.internal.submitting.set(!0)}));try{await W(a,i)&&await(o?.(P(a,i),t))}catch(e){r((()=>{e instanceof $&&Object.entries(e.errors).forEach((([e,t])=>{t&&z(a,e,t,{...i,shouldFocus:!1})})),e instanceof $&&!e.message||function(e,t,{duration:r}={}){e.internal.response.set(t),r&&setTimeout((()=>{n(e.internal.response.get)===t&&e.internal.response.set({})}),r)}(a,{status:"error",message:e?.message||"An unknown error has occurred."},{duration:s})}))}finally{a.internal.submitting.set(!1)}}}),!1),d(),o;var o,g}(t({of:a},e)),Field:e=>function(e){const r=o((()=>function(e,t){if(!D(e,t)){const n=V(t,e.internal.initialValues),r=b([]),i=b(n),a=b(n),o=b(n),s=b(""),l=b(!1),u=b(!1),c=b(!1);e.internal.fields[t]={elements:r,initialValue:i,startValue:a,value:o,error:s,active:l,touched:u,dirty:c,validate:[],validateOn:void 0,revalidateOn:void 0,transform:[],consumers:new Set},e.internal.fieldNames.set((e=>[...e,t]))}return D(e,t)}(e.of,e.name)));return B(t({getStore:r},e)),o((()=>e.children({get name(){return e.name},get value(){return r().value.get()},get error(){return r().error.get()},get active(){return r().active.get()},get touched(){return r().touched.get()},get dirty(){return r().dirty.get()}},{get name(){return e.name},get autofocus(){return!!r().error.get()},ref(t){r().elements.set((e=>[...e,t])),i((()=>{if("radio"!==t.type&&void 0===r().startValue.get()&&void 0===n(r().value.get)){const n=S(t,r(),e.type);r().startValue.set((()=>n)),r().value.set((()=>n))}}))},onInput(t){j(e.of,r(),e.name,t,["touched","input"],S(t.currentTarget,r(),e.type))},onChange(t){j(e.of,r(),e.name,t,["change"])},onBlur(t){j(e.of,r(),e.name,t,["touched","blur"])}})))}(t({of:a},e)),FieldArray:e=>function(e){const n=o((()=>function(e,t){if(!w(e,t)){const n=V(t,e.internal.initialValues)?.map((()=>N()))||[],r=b(n),i=b(n),a=b(n),o=b(""),s=b(!1),l=b(!1),u=b(!1);e.internal.fieldArrays[t]={initialItems:r,startItems:i,items:a,error:o,active:s,touched:l,dirty:u,validate:[],validateOn:void 0,revalidateOn:void 0,consumers:new Set},e.internal.fieldArrayNames.set((e=>[...e,t]))}return w(e,t)}(e.of,e.name)));return B(t({getStore:n},e)),o((()=>e.children({get name(){return e.name},get items(){return n().items.get()},get error(){return n().error.get()},get active(){return n().active.get()},get touched(){return n().touched.get()},get dirty(){return n().dirty.get()}})))}(t({of:a},e))}]}function S(e,t,r){const{checked:i,files:a,options:o,value:s,valueAsDate:l,valueAsNumber:u}=e;return n((()=>r&&"string"!==r?"string[]"===r?o?[...o].filter((e=>e.selected&&!e.disabled)).map((e=>e.value)):i?[...t.value.get()||[],s]:(t.value.get()||[]).filter((e=>e!==s)):"number"===r?u:"boolean"===r?i:"File"===r&&a?a[0]:"File[]"===r&&a?[...a]:"Date"===r&&l?l:t.value.get():s))}function k(e){return[...Object.values(e.internal.fields),...Object.values(e.internal.fieldArrays)]}function w(e,t){return e.internal.fieldArrays[t]}function C(e,t){O(e,!1).forEach((r=>{const i=n(w(e,r).items.get).length-1;t.filter((e=>e.startsWith(`${r}.`)&&function(e,t){return+t.replace(`${e}.`,"").split(".")[0]}(r,e)>i)).forEach((e=>{t.splice(t.indexOf(e),1)}))}))}function O(e,t=!0){const r=[...n(e.internal.fieldArrayNames.get)];return t&&C(e,r),r}function D(e,t){return e.internal.fields[t]}function E(e,t,r){return n((()=>{const i=function(e,t=!0){const r=[...n(e.internal.fieldNames.get)];return t&&C(e,r),r}(e,r),a=O(e,r);return"string"==typeof t||Array.isArray(t)?("string"==typeof t?[t]:t).reduce(((e,t)=>{const[n,r]=e;return a.includes(t)?(a.forEach((e=>{e.startsWith(t)&&r.add(e)})),i.forEach((e=>{e.startsWith(t)&&n.add(e)}))):n.add(t),e}),[new Set,new Set]).map((e=>[...e])):[i,a]}))}function T(e,t){return("string"==typeof e||Array.isArray(e)?t:e)||{}}function V(e,t){return e.split(".").reduce(((e,t)=>e?.[t]),t)}let F=0;function N(){return F++}function L(e,t){n((()=>{const i=function(e,t){const n=e=>e instanceof Blob?e.size:e;return Array.isArray(e)&&Array.isArray(t)?e.map(n).join()!==t.map(n).join():e instanceof Date&&t instanceof Date?e.getTime()!==t.getTime():!(Number.isNaN(e)&&Number.isNaN(t)||e===t)}(t.startValue.get(),t.value.get());i!==t.dirty.get()&&r((()=>{t.dirty.set(i),function(e,t){n((()=>e.internal.dirty.set(t||k(e).some((e=>e.active.get()&&e.dirty.get())))))}(e,i)}))}))}function j(e,t,i,a,o,s){r((()=>{t.value.set((e=>t.transform.reduce(((e,t)=>t(e,a)),s??e))),t.touched.set(!0),e.internal.touched.set(!0),L(e,t),function(e,t,r,{on:i,shouldFocus:a=!1}){n((()=>{const n=t.validateOn??e.internal.validateOn,o=t.revalidateOn??e.internal.revalidateOn;i.includes(("submit"===n?e.internal.submitted.get():t.error.get())?o:n)&&W(e,r,{shouldFocus:a})}))}(e,t,i,{on:o})}))}function I(e,t){n((()=>{e.internal.invalid.set(t||k(e).some((e=>e.active.get()&&e.error.get())))}))}function x(e){let t=!1,i=!1,a=!1;n((()=>{for(const n of k(e))if(n.active.get()&&(n.touched.get()&&(t=!0),n.dirty.get()&&(i=!0),n.error.get()&&(a=!0)),t&&i&&a)break})),r((()=>{e.internal.touched.set(t),e.internal.dirty.set(i),e.internal.invalid.set(a)}))}function M(e,t){n((()=>D(e,t)?.elements.get()[0]?.focus()))}function z(e,t,i,{shouldActive:a=!0,shouldTouched:o=!1,shouldDirty:s=!1,shouldFocus:l=!!i}={}){r((()=>{n((()=>{for(const n of[D(e,t),w(e,t)])!n||a&&!n.active.get()||o&&!n.touched.get()||s&&!n.dirty.get()||(n.error.set(i),i&&"value"in n&&l&&M(e,t))})),I(e,!!i)}))}function P(e,t,n){const[r,i]=E(e,t),{shouldActive:a=!0,shouldTouched:o=!1,shouldDirty:s=!1,shouldValid:l=!1}=T(t,n);return"string"==typeof t||Array.isArray(t)?i.forEach((t=>w(e,t).items.get())):e.internal.fieldNames.get(),r.reduce(((n,r)=>{const i=D(e,r);return a&&!i.active.get()||o&&!i.touched.get()||s&&!i.dirty.get()||l&&i.error.get()||("string"==typeof t?r.replace(`${t}.`,""):r).split(".").reduce(((e,t,n,r)=>e[t]=n===r.length-1?i.value.get():"object"==typeof e[t]&&e[t]||(isNaN(+r[n+1])?{}:[])),n),n}),"string"==typeof t?[]:{})}async function W(e,t,i){const[a,o]=E(e,t),{shouldActive:s=!0,shouldFocus:l=!0}=T(t,i),u=N();e.internal.validators.add(u),e.internal.validating.set(!0);const c=e.internal.validate?await e.internal.validate(n((()=>P(e,{shouldActive:s})))):{};let d=!("string"!=typeof t&&!Array.isArray(t)&&Object.keys(c).length);const[g]=await Promise.all([Promise.all(a.map((async t=>{const r=D(e,t);if(!s||n(r.active.get)){let e;for(const t of r.validate)if(e=await t(n(r.value.get)),e)break;const i=e||c[t]||"";return i&&(d=!1),r.error.set(i),i?t:null}}))),Promise.all(o.map((async t=>{const r=w(e,t);if(!s||n(r.active.get)){let e="";for(const t of r.validate)if(e=await t(n(r.items.get)),e)break;const i=e||c[t]||"";i&&(d=!1),r.error.set(i)}})))]);return r((()=>{if(function(e,t,{shouldActive:r=!0}){const i=Object.entries(t).reduce(((t,[i,a])=>([D(e,i),w(e,i)].every((e=>!e||r&&!n(e.active.get)))&&t.push(a),t)),[]).join(" ");i&&e.internal.response.set({status:"error",message:i})}(e,c,{shouldActive:s}),l){const t=g.find((e=>e));t&&M(e,t)}I(e,!d),e.internal.validators.delete(u),e.internal.validators.size||e.internal.validating.set(!1)})),d}function B({of:e,name:t,getStore:o,validate:s,validateOn:l,revalidateOn:u,transform:c,keepActive:d=!1,keepState:g=!0}){i((()=>{const i=o();i.validate=s?Array.isArray(s)?s:[s]:[],i.validateOn=l,i.revalidateOn=u,"transform"in i&&(i.transform=c?Array.isArray(c)?c:[c]:[]);const f=N();i.consumers.add(f),n(i.active.get)||r((()=>{i.active.set(!0),x(e)})),a((()=>setTimeout((()=>{i.consumers.delete(f),r((()=>{d||i.consumers.size||(i.active.set(!1),g?x(e):function(e,t){const[i,a]=E(e,t,!1),o="string"==typeof t&&1===i.length,s=!o&&!Array.isArray(t),l=T(t,void 0),{initialValue:u,initialValues:c,keepResponse:d=!1,keepSubmitCount:g=!1,keepSubmitted:f=!1,keepValues:m=!1,keepDirtyValues:v=!1,keepItems:p=!1,keepDirtyItems:y=!1,keepErrors:h=!1,keepTouched:b=!1,keepDirty:A=!1}=l;r((()=>n((()=>{i.forEach((t=>{const n=D(e,t);(o?"initialValue"in l:c)&&n.initialValue.set((()=>o?u:V(t,c)));const r=v&&n.dirty.get();m||r||(n.startValue.set(n.initialValue.get),n.value.set(n.initialValue.get),n.elements.get().forEach((e=>{"file"===e.type&&(e.value="")}))),b||n.touched.set(!1),A||m||r||n.dirty.set(!1),h||n.error.set("")})),a.forEach((t=>{const n=w(e,t),r=y&&n.dirty.get();p||r||(c&&n.initialItems.set(V(t,c)?.map((()=>N()))||[]),n.startItems.set([...n.initialItems.get()]),n.items.set([...n.initialItems.get()])),b||n.touched.set(!1),A||p||r||n.dirty.set(!1),h||n.error.set("")})),s&&(d||e.internal.response.set({}),g||e.internal.submitCount.set(0),f||e.internal.submitted.set(!1)),x(e)}))))}(e,t))})),"elements"in i&&i.elements.set((e=>e.filter((e=>e.isConnected))))}))))}))}class $ extends Error{name="FormError";errors;constructor(e,t){super("string"==typeof e?e:""),this.errors="string"==typeof e?t||{}:e}}var H=g("<form novalidate>"),R=g("<div>"),q=g("<div class=w-full><div class=Editor><code class=Monaco></code><input>"),K=g("<div class=Error><span>&nbsp;&nbsp;&nbsp;"),U=g("<input type=hidden>"),G=({Type:n}={Type:"HTML"})=>{const[r,{Form:s,Field:l}]=A(),d=e(J(n));let g,p;return f((()=>{console.log(g),g instanceof HTMLElement&&(p=h.create(g,{value:d[0](),language:n.toLowerCase(),automaticLayout:!0,lineNumbers:"off","semanticHighlighting.enabled":"configuredByTheme",autoClosingBrackets:"always",autoIndent:"full",tabSize:4,detectIndentation:!1,useTabStops:!0,minimap:{enabled:!1},scrollbar:{useShadows:!0,horizontal:"hidden",verticalScrollbarSize:10,verticalSliderSize:4,alwaysConsumeMouseWheel:!1},folding:!1,theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"Dark":"Light",wrappingStrategy:"advanced",bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!0},padding:{top:12,bottom:12},fixedOverflowWidgets:!0,tabCompletion:"on",acceptSuggestionOnEnter:"on",cursorWidth:5,roundedSelection:!0,matchBrackets:"always",autoSurround:"languageDefined",screenReaderAnnounceInlineSuggestion:!1,renderFinalNewline:"on",selectOnLineNumbers:!1,formatOnType:!0,formatOnPaste:!0,fontFamily:"'Source Code Pro'",fontWeight:"400",fontLigatures:!0,links:!1,fontSize:16}),p.getModel()?.setEOL(h.EndOfLineSequence.LF),p.onKeyDown((e=>{e.ctrlKey&&"KeyS"===e.code&&(e.preventDefault(),W(r),r.element?.submit())})),p.onDidChangeModelLanguageConfiguration((()=>p.getAction("editor.action.formatDocument")?.run())),p.onDidLayoutChange((()=>p.getAction("editor.action.formatDocument")?.run())),window.addEventListener("load",(()=>p.getAction("editor.action.formatDocument")?.run())),setTimeout((()=>p.getAction("editor.action.formatDocument")?.run()),1e3),i(y(d[0],(e=>p.getModel()?.setValue(e)),{defer:!1})))})),a((()=>{console.log(g),console.log(2)})),b=R(),m(b,v(s,{method:"post",onSubmit:Q,get children(){return[v(l,{name:"Content",get validate(){return[(e=`Please enter some ${n}.`,t=>!t&&0!==t||Array.isArray(t)&&!t.length?e:"")];var e},children:(e,n)=>{return d=(l=(s=(a=q()).firstChild).firstChild).nextSibling,"function"==typeof g?u(g,l):g=l,m(s,(i=o((()=>!!e.error)),()=>{return i()&&((n=(t=K()).firstChild).firstChild,t.$$click=()=>{z(r,"Content","",undefined),p.focus()},m(n,(()=>e.error),null),t);var t,n}),d),c(d,t(n,{type:"hidden",required:!0}),!1),a;var i,a,s,l,d}}),v(l,{name:"Field",children:(e,r)=>{return i=U(),c(i,t(r,{value:n}),!1),i;var i}})]}})),b;var b};const J=e=>{switch(e){case"CSS":return"\n/* Example CSS Code */\nbody {\n\n}\t\t\t\n";case"HTML":return'\n\x3c!-- Example HTML Code --\x3e\n<!doctype html>\n<html lang="en">\n\t<body>\n\t</body>\n</html>\n';case"TypeScript":return"\n/**\n * Example TypeScript Code\n */\nexport default () => ({});\n";default:return""}},Q=({Content:e,Field:t},n)=>{n&&n.preventDefault()};p(["click"]);export{J as Return,Q as Update,G as default};