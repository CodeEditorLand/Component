{"version":3,"file":"Socket.gcSY1U_x.js","sources":["../../../../node_modules/@solid-primitives/websocket/dist/index.js","../../../Wind/Target/Context/Connection/Socket.js"],"sourcesContent":["import { onCleanup, createSignal } from 'solid-js';\n\n// src/index.ts\nvar makeWS = (url, protocols, sendQueue = []) => {\n  const ws = new WebSocket(url, protocols);\n  const _send = ws.send.bind(ws);\n  ws.send = (msg) => ws.readyState == 1 ? _send(msg) : sendQueue.push(msg);\n  ws.addEventListener(\"open\", () => {\n    while (sendQueue.length)\n      _send(sendQueue.shift());\n  });\n  return ws;\n};\nvar createWS = (url, protocols) => {\n  const ws = makeWS(url, protocols);\n  onCleanup(() => ws.close());\n  return ws;\n};\nvar createWSState = (ws) => {\n  const [state, setState] = createSignal(ws.readyState);\n  const _close = ws.close.bind(ws);\n  ws.addEventListener(\"open\", () => setState(1));\n  ws.close = (...args) => {\n    _close(...args);\n    setState(2);\n  };\n  ws.addEventListener(\"close\", () => setState(3));\n  return state;\n};\nvar makeReconnectingWS = (url, protocols, options = {}) => {\n  let retries = options.retries || Infinity;\n  let ws;\n  const queue = [];\n  let events = [\n    [\n      \"close\",\n      () => {\n        retries-- > 0 && setTimeout(getWS, options.delay || 3e3);\n      }\n    ]\n  ];\n  const getWS = () => {\n    if (ws && ws.readyState < 2)\n      ws.close();\n    ws = Object.assign(makeWS(url, protocols, queue), {\n      reconnect: getWS\n    });\n    events.forEach((args) => ws.addEventListener(...args));\n  };\n  getWS();\n  const wws = {\n    close: (...args) => {\n      retries = 0;\n      return ws.close(...args);\n    },\n    addEventListener: (...args) => {\n      events.push(args);\n      return ws.addEventListener(...args);\n    },\n    removeEventListener: (...args) => {\n      events = events.filter((ev) => args[0] !== ev[0] || args[1] !== ev[1]);\n      return ws.removeEventListener(...args);\n    },\n    send: (msg) => {\n      wws.send.before?.();\n      return ws.send(msg);\n    }\n  };\n  for (const name in ws)\n    wws[name] == null && Object.defineProperty(wws, name, {\n      enumerable: true,\n      get: () => typeof ws[name] === \"function\" ? ws[name].bind(ws) : ws[name]\n    });\n  return wws;\n};\nvar createReconnectingWS = (url, protocols, options) => {\n  const ws = makeReconnectingWS(url, protocols, options);\n  onCleanup(() => ws.close());\n  return ws;\n};\nvar makeHeartbeatWS = (ws, options = {}) => {\n  let pingtimer;\n  let pongtimer;\n  const clearTimers = () => (clearTimeout(pingtimer), clearTimeout(pongtimer));\n  ws.send.before = () => {\n    clearTimers();\n    pongtimer = setTimeout(ws.reconnect, options.wait || 1500);\n  };\n  const receiveMessage = () => {\n    clearTimers();\n    pingtimer = setTimeout(() => ws.send(options.message || \"ping\"), options.interval || 1e3);\n  };\n  ws.addEventListener(\"close\", clearTimers);\n  ws.addEventListener(\"message\", receiveMessage);\n  ws.addEventListener(\"open\", () => setTimeout(receiveMessage, options.interval || 1e3));\n  return ws;\n};\n\nexport { createReconnectingWS, createWS, createWSState, makeHeartbeatWS, makeReconnectingWS, makeWS };\n","import e from\"../Environment/Context.js\";import{createReconnectingWS as t,makeHeartbeatWS as r}from\"@solid-primitives/websocket\";import{createSignal as a}from\"solid-js\";var m=a(r(t(e.Data[0]().Socket,void 0,{delay:0,retries:5}),{interval:5e4,message:\"beat\"}));export{m as default};\n"],"names":["a","r","t","e"],"mappings":";;;AAEA;AACA,IAAI,MAAM,GAAG,CAAC,GAAG,EAAE,SAAS,EAAE,SAAS,GAAG,EAAE,KAAK;AACjD,EAAE,MAAM,EAAE,GAAG,IAAI,SAAS,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;AAC3C,EAAE,MAAM,KAAK,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AACjC,EAAE,EAAE,CAAC,IAAI,GAAG,CAAC,GAAG,KAAK,EAAE,CAAC,UAAU,IAAI,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC3E,EAAE,EAAE,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM;AACpC,IAAI,OAAO,SAAS,CAAC,MAAM;AAC3B,MAAM,KAAK,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;AAC/B,GAAG,CAAC,CAAC;AACL,EAAE,OAAO,EAAE,CAAC;AACZ,CAAC,CAAC;AAMC,IAAC,aAAa,GAAG,CAAC,EAAE,KAAK;AAC5B,EAAE,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,YAAY,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC;AACxD,EAAE,MAAM,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AACnC,EAAE,EAAE,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AACjD,EAAE,EAAE,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,KAAK;AAC1B,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC;AACpB,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC;AAChB,GAAG,CAAC;AACJ,EAAE,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AAClD,EAAE,OAAO,KAAK,CAAC;AACf,EAAE;AACF,IAAI,kBAAkB,GAAG,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,GAAG,EAAE,KAAK;AAC3D,EAAE,IAAI,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,QAAQ,CAAC;AAC5C,EAAE,IAAI,EAAE,CAAC;AACT,EAAE,MAAM,KAAK,GAAG,EAAE,CAAC;AACnB,EAAE,IAAI,MAAM,GAAG;AACf,IAAI;AACJ,MAAM,OAAO;AACb,MAAM,MAAM;AACZ,QAAQ,OAAO,EAAE,GAAG,CAAC,IAAI,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC;AACjE,OAAO;AACP,KAAK;AACL,GAAG,CAAC;AACJ,EAAE,MAAM,KAAK,GAAG,MAAM;AACtB,IAAI,IAAI,EAAE,IAAI,EAAE,CAAC,UAAU,GAAG,CAAC;AAC/B,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC;AACjB,IAAI,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,SAAS,EAAE,KAAK,CAAC,EAAE;AACtD,MAAM,SAAS,EAAE,KAAK;AACtB,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK,EAAE,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAC3D,GAAG,CAAC;AACJ,EAAE,KAAK,EAAE,CAAC;AACV,EAAE,MAAM,GAAG,GAAG;AACd,IAAI,KAAK,EAAE,CAAC,GAAG,IAAI,KAAK;AACxB,MAAM,OAAO,GAAG,CAAC,CAAC;AAClB,MAAM,OAAO,EAAE,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC;AAC/B,KAAK;AACL,IAAI,gBAAgB,EAAE,CAAC,GAAG,IAAI,KAAK;AACnC,MAAM,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACxB,MAAM,OAAO,EAAE,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC,CAAC;AAC1C,KAAK;AACL,IAAI,mBAAmB,EAAE,CAAC,GAAG,IAAI,KAAK;AACtC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7E,MAAM,OAAO,EAAE,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC,CAAC;AAC7C,KAAK;AACL,IAAI,IAAI,EAAE,CAAC,GAAG,KAAK;AACnB,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC;AAC1B,MAAM,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC1B,KAAK;AACL,GAAG,CAAC;AACJ,EAAE,KAAK,MAAM,IAAI,IAAI,EAAE;AACvB,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE;AAC1D,MAAM,UAAU,EAAE,IAAI;AACtB,MAAM,GAAG,EAAE,MAAM,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;AAC9E,KAAK,CAAC,CAAC;AACP,EAAE,OAAO,GAAG,CAAC;AACb,CAAC,CAAC;AACF,IAAI,oBAAoB,GAAG,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,KAAK;AACxD,EAAE,MAAM,EAAE,GAAG,kBAAkB,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;AACzD,EAAE,SAAS,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC;AAC9B,EAAE,OAAO,EAAE,CAAC;AACZ,CAAC,CAAC;AACF,IAAI,eAAe,GAAG,CAAC,EAAE,EAAE,OAAO,GAAG,EAAE,KAAK;AAC5C,EAAE,IAAI,SAAS,CAAC;AAChB,EAAE,IAAI,SAAS,CAAC;AAChB,EAAE,MAAM,WAAW,GAAG,OAAO,YAAY,CAAC,SAAS,CAAC,EAAE,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC;AAC/E,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM;AACzB,IAAI,WAAW,EAAE,CAAC;AAClB,IAAI,SAAS,GAAG,UAAU,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC;AAC/D,GAAG,CAAC;AACJ,EAAE,MAAM,cAAc,GAAG,MAAM;AAC/B,IAAI,WAAW,EAAE,CAAC;AAClB,IAAI,SAAS,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,IAAI,MAAM,CAAC,EAAE,OAAO,CAAC,QAAQ,IAAI,GAAG,CAAC,CAAC;AAC9F,GAAG,CAAC;AACJ,EAAE,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;AAC5C,EAAE,EAAE,CAAC,gBAAgB,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;AACjD,EAAE,EAAE,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,UAAU,CAAC,cAAc,EAAE,OAAO,CAAC,QAAQ,IAAI,GAAG,CAAC,CAAC,CAAC;AACzF,EAAE,OAAO,EAAE,CAAC;AACZ,CAAC;;AChG2K,IAAC,CAAC,CAACA,YAAC,CAACC,eAAC,CAACC,oBAAC,CAACC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;;;;;;;;;","x_google_ignoreList":[0]}