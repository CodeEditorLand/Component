const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/Context.DgDnQ0VN.js","_astro/Editor.8RDmBfOP.js","_astro/solid.-melTDdq.js","_astro/Context.DAtEQyOM.js","_astro/Context.CPfFLoRl.js","_astro/Context.C9bvCrJZ.js","_astro/Anchor.Da3TxD1T.js","_astro/Merge.CvOgcbzx.js","_astro/Button.D6fOpe17.js","_astro/Copy.CbVrE-8U.js","_astro/Copy.BCBGr1zU.css"])))=>i.map(i=>d[i]);
import{_ as w}from"./Editor.8RDmBfOP.js";import{e as W}from"./editor.main.D4etedUs.js";import{createSignal as G,mergeProps as _,untrack as f,batch as A,createEffect as D,onCleanup as oe,createMemo as I,splitProps as le,on as P,onMount as ue,For as de}from"./solid.-melTDdq.js";import{g as ce,u as fe,s as ge,a as ye,t as he}from"./web.BLs1Cz6t.js";function c(e){const[t,n]=G(e);return{get:t,set:n}}function me({initialValues:e={},validateOn:t="submit",revalidateOn:n="input",validate:r}={}){const a=c([]),u=c([]),o=c(),i=c(0),l=c(!1),s=c(!1),g=c(!1),d=c(!1),y=c(!1),v=c(!1),p=c({});return{internal:{initialValues:e,validate:r,validateOn:t,revalidateOn:n,fieldNames:a,fieldArrayNames:u,element:o,submitCount:i,submitting:l,submitted:s,validating:g,touched:d,dirty:y,invalid:v,response:p,fields:{},fieldArrays:{},validators:new Set},get element(){return o.get()},get submitCount(){return i.get()},get submitting(){return l.get()},get submitted(){return s.get()},get validating(){return g.get()},get touched(){return d.get()},get dirty(){return y.get()},get invalid(){return v.get()},get response(){return p.get()}}}function ve(e){const t=me(e);return[t,{Form:n=>Oe(_({of:t},n)),Field:n=>Ie(_({of:t},n)),FieldArray:n=>Ne(_({of:t},n))}]}function q(e,t,n){const{checked:r,files:a,options:u,value:o,valueAsDate:i,valueAsNumber:l}=e;return f(()=>!n||n==="string"?o:n==="string[]"?u?[...u].filter(s=>s.selected&&!s.disabled).map(s=>s.value):r?[...t.value.get()||[],o]:(t.value.get()||[]).filter(s=>s!==o):n==="number"?l:n==="boolean"?r:n==="File"&&a?a[0]:n==="File[]"&&a?[...a]:n==="Date"&&i?i:t.value.get())}function z(e){return[...Object.values(e.internal.fields),...Object.values(e.internal.fieldArrays)]}function S(e,t){return e.internal.fieldArrays[t]}function pe(e,t){return+t.replace(`${e}.`,"").split(".")[0]}function Q(e,t){X(e,!1).forEach(n=>{const r=f(S(e,n).items.get).length-1;t.filter(a=>a.startsWith(`${n}.`)&&pe(n,a)>r).forEach(a=>{t.splice(t.indexOf(a),1)})})}function X(e,t=!0){const n=[...f(e.internal.fieldArrayNames.get)];return t&&Q(e,n),n}function Ee(e,t=!0){const n=[...f(e.internal.fieldNames.get)];return t&&Q(e,n),n}function F(e,t){return e.internal.fields[t]}function x(e,t,n){return f(()=>{const r=Ee(e,n),a=X(e,n);return typeof t=="string"||Array.isArray(t)?(typeof t=="string"?[t]:t).reduce((u,o)=>{const[i,l]=u;return a.includes(o)?(a.forEach(s=>{s.startsWith(o)&&l.add(s)}),r.forEach(s=>{s.startsWith(o)&&i.add(s)})):i.add(o),u},[new Set,new Set]).map(u=>[...u]):[r,a]})}function H(e,t){return(typeof e!="string"&&!Array.isArray(e)?e:t)||{}}function N(e,t){return e.split(".").reduce((n,r)=>n?.[r],t)}let Ae=0;function L(){return Ae++}function be(e,t){const n=r=>r instanceof Blob?r.size:r;return Array.isArray(e)&&Array.isArray(t)?e.map(n).join()!==t.map(n).join():e instanceof Date&&t instanceof Date?e.getTime()!==t.getTime():Number.isNaN(e)&&Number.isNaN(t)?!1:e!==t}function Se(e,t){f(()=>e.internal.dirty.set(t||z(e).some(n=>n.active.get()&&n.dirty.get())))}function Y(e,t){f(()=>{const n=be(t.startValue.get(),t.value.get());n!==t.dirty.get()&&A(()=>{t.dirty.set(n),Se(e,n)})})}function Z(e,t,n,{on:r,shouldFocus:a=!1}){f(()=>{r.includes((e.internal.validateOn==="submit"?e.internal.submitted.get():t.error.get())?e.internal.revalidateOn:e.internal.validateOn)&&k(e,n,{shouldFocus:a})})}function V(e,t,n,r,a,u){A(()=>{t.value.set(o=>t.transform.reduce((i,l)=>l(i,r),u??o)),t.touched.set(!0),e.internal.touched.set(!0),Y(e,t),Z(e,t,n,{on:a})})}function Fe(e,t){if(!S(e,t)){const n=N(t,e.internal.initialValues)?.map(()=>L())||[],r=c(n),a=c(n),u=c(n),o=c(""),i=c(!1),l=c(!1),s=c(!1);e.internal.fieldArrays[t]={initialItems:r,startItems:a,items:u,error:o,active:i,touched:l,dirty:s,validate:[],consumers:new Set},e.internal.fieldArrayNames.set(g=>[...g,t])}return S(e,t)}function ee(e,t){if(!F(e,t)){const n=N(t,e.internal.initialValues),r=c([]),a=c(n),u=c(n),o=c(n),i=c(""),l=c(!1),s=c(!1),g=c(!1);e.internal.fields[t]={elements:r,initialValue:a,startValue:u,value:o,error:i,active:l,touched:s,dirty:g,validate:[],transform:[],consumers:new Set},e.internal.fieldNames.set(d=>[...d,t])}return F(e,t)}function we(e,t,{shouldActive:n=!0}){const r=Object.entries(t).reduce((a,[u,o])=>([F(e,u),S(e,u)].every(i=>!i||n&&!f(i.active.get))&&a.push(o),a),[]).join(" ");r&&e.internal.response.set({status:"error",message:r})}function te(e,t){f(()=>{e.internal.invalid.set(t||z(e).some(n=>n.active.get()&&n.error.get()))})}function M(e){let t=!1,n=!1,r=!1;f(()=>{for(const a of z(e))if(a.active.get()&&(a.touched.get()&&(t=!0),a.dirty.get()&&(n=!0),a.error.get()&&(r=!0)),t&&n&&r)break}),A(()=>{e.internal.touched.set(t),e.internal.dirty.set(n),e.internal.invalid.set(r)})}function ne(e,t){f(()=>F(e,t)?.elements.get()[0]?.focus())}function ie(e,t,n,{shouldActive:r=!0,shouldTouched:a=!1,shouldDirty:u=!1,shouldFocus:o=!!n}={}){A(()=>{f(()=>{for(const i of[F(e,t),S(e,t)])i&&(!r||i.active.get())&&(!a||i.touched.get())&&(!u||i.dirty.get())&&(i.error.set(n),n&&"value"in i&&o&&ne(e,t))}),te(e,!!n)})}function _e(e,t,n){ie(e,t,"",n)}function re(e,t,n){const[r,a]=x(e,t),{shouldActive:u=!0,shouldTouched:o=!1,shouldDirty:i=!1,shouldValid:l=!1}=H(t,n);return typeof t!="string"&&!Array.isArray(t)?e.internal.fieldNames.get():a.forEach(s=>S(e,s).items.get()),r.reduce((s,g)=>{const d=F(e,g);return(!u||d.active.get())&&(!o||d.touched.get())&&(!i||d.dirty.get())&&(!l||!d.error.get())&&(typeof t=="string"?g.replace(`${t}.`,""):g).split(".").reduce((y,v,p,b)=>y[v]=p===b.length-1?d.value.get():typeof y[v]=="object"&&y[v]||(isNaN(+b[p+1])?{}:[]),s),s},typeof t=="string"?[]:{})}function Te(e,t,n){const[r,a]=x(e,t,!1),u=typeof t=="string"&&r.length===1,o=!u&&!Array.isArray(t),i=H(t,n),{initialValue:l,initialValues:s,keepResponse:g=!1,keepSubmitCount:d=!1,keepSubmitted:y=!1,keepValues:v=!1,keepDirtyValues:p=!1,keepItems:b=!1,keepDirtyItems:se=!1,keepErrors:$=!1,keepTouched:j=!1,keepDirty:B=!1}=i;A(()=>f(()=>{r.forEach(T=>{const m=F(e,T);(u?"initialValue"in i:s)&&m.initialValue.set(()=>u?l:N(T,s));const C=p&&m.dirty.get();!v&&!C&&(m.startValue.set(m.initialValue.get),m.value.set(m.initialValue.get),m.elements.get().forEach(K=>{K.type==="file"&&(K.value="")})),j||m.touched.set(!1),!B&&!v&&!C&&m.dirty.set(!1),$||m.error.set("")}),a.forEach(T=>{const m=S(e,T),C=se&&m.dirty.get();!b&&!C&&(s&&m.initialItems.set(N(T,s)?.map(()=>L())||[]),m.startItems.set([...m.initialItems.get()]),m.items.set([...m.initialItems.get()])),j||m.touched.set(!1),!B&&!b&&!C&&m.dirty.set(!1),$||m.error.set("")}),o&&(g||e.internal.response.set({}),d||e.internal.submitCount.set(0),y||e.internal.submitted.set(!1)),M(e)}))}function Ce(e,t,{duration:n}={}){e.internal.response.set(t),n&&setTimeout(()=>{f(e.internal.response.get)===t&&e.internal.response.set({})},n)}function De(e,t,n,{shouldTouched:r=!0,shouldDirty:a=!0,shouldValidate:u=!0,shouldFocus:o=!0}={}){A(()=>{const i=ee(e,t);i.value.set(()=>n),r&&(i.touched.set(!0),e.internal.touched.set(!0)),a&&Y(e,i),u&&Z(e,i,t,{on:["touched","input"],shouldFocus:o})})}async function k(e,t,n){const[r,a]=x(e,t),{shouldActive:u=!0,shouldFocus:o=!0}=H(t,n),i=L();e.internal.validators.add(i),e.internal.validating.set(!0);const l=e.internal.validate?await e.internal.validate(f(()=>re(e,{shouldActive:u}))):{};let s=typeof t!="string"&&!Array.isArray(t)?!Object.keys(l).length:!0;const[g]=await Promise.all([Promise.all(r.map(async d=>{const y=F(e,d);if(!u||f(y.active.get)){let v;for(const b of y.validate)if(v=await b(f(y.value.get)),v)break;const p=v||l[d]||"";return p&&(s=!1),y.error.set(p),p?d:null}})),Promise.all(a.map(async d=>{const y=S(e,d);if(!u||f(y.active.get)){let v="";for(const b of y.validate)if(v=await b(f(y.items.get)),v)break;const p=v||l[d]||"";p&&(s=!1),y.error.set(p)}}))]);return A(()=>{if(we(e,l,{shouldActive:u}),o){const d=g.find(y=>y);d&&ne(e,d)}te(e,!s),e.internal.validators.delete(i),e.internal.validators.size||e.internal.validating.set(!1)}),s}function ae({of:e,name:t,getStore:n,validate:r,transform:a,keepActive:u=!1,keepState:o=!0}){D(()=>{const i=n();i.validate=r?Array.isArray(r)?r:[r]:[],"transform"in i&&(i.transform=a?Array.isArray(a)?a:[a]:[]);const l=L();i.consumers.add(l),f(i.active.get)||A(()=>{i.active.set(!0),M(e)}),oe(()=>setTimeout(()=>{i.consumers.delete(l),A(()=>{!u&&!i.consumers.size&&(i.active.set(!1),o?M(e):Te(e,t))}),"elements"in i&&i.elements.set(s=>s.filter(g=>g.isConnected))}))})}function Ie(e){const t=I(()=>ee(e.of,e.name));return ae(_({getStore:t},e)),I(()=>e.children({get name(){return e.name},get value(){return t().value.get()},get error(){return t().error.get()},get active(){return t().active.get()},get touched(){return t().touched.get()},get dirty(){return t().dirty.get()}},{get name(){return e.name},get autofocus(){return!!t().error.get()},ref(n){t().elements.set(r=>[...r,n]),D(()=>{if(n.type!=="radio"&&t().startValue.get()===void 0&&f(t().value.get)===void 0){const r=q(n,t(),e.type);t().startValue.set(()=>r),t().value.set(()=>r)}})},onInput(n){V(e.of,t(),e.name,n,["touched","input"],q(n.currentTarget,t(),e.type))},onChange(n){V(e.of,t(),e.name,n,["change"])},onBlur(n){V(e.of,t(),e.name,n,["touched","blur"])}}))}function Ne(e){const t=I(()=>Fe(e.of,e.name));return ae(_({getStore:t},e)),I(()=>e.children({get name(){return e.name},get items(){return t().items.get()},get error(){return t().error.get()},get active(){return t().active.get()},get touched(){return t().touched.get()},get dirty(){return t().dirty.get()}}))}class U extends Error{name="FormError";errors;constructor(t,n){super(typeof t=="string"?t:""),this.errors=typeof t=="string"?n||{}:t}}var ke=he("<form novalidate>");function Oe(e){const[,t,n]=le(e,["of"],["keepResponse","shouldActive","shouldTouched","shouldDirty","shouldFocus"]);return(()=>{var r=ce(ke),a=e.of.internal.element.set;return typeof a=="function"?fe(a,r):e.of.internal.element.set=r,ge(r,_(n,{onSubmit:async u=>{u.preventDefault();const{of:o,onSubmit:i,responseDuration:l}=e;A(()=>{t.keepResponse||o.internal.response.set({}),o.internal.submitCount.set(s=>s+1),o.internal.submitted.set(!0),o.internal.submitting.set(!0)});try{await k(o,t)&&await i(re(o,t),u)}catch(s){A(()=>{s instanceof U&&Object.entries(s.errors).forEach(([g,d])=>{d&&ie(o,g,d,{...t,shouldFocus:!1})}),(!(s instanceof U)||s.message)&&Ce(o,{status:"error",message:s?.message||"An unknown error has occurred."},{duration:l})})}finally{o.internal.submitting.set(!1)}}}),!1),ye(),r})()}function Le(e){return t=>!t&&t!==0||Array.isArray(t)&&!t.length?e:""}var je=async({Type:e}={Type:"HTML"})=>{const[t,{Form:n,Field:r}]=ve(),a=crypto.randomUUID();D(P(E.Editors[0],l=>{De(t,"Content",l.get(a)?.Content??"",{shouldFocus:!1,shouldTouched:!1}),k(t)},{defer:!1}));const u=G(Pe(e));D(P(R.Messages[0],l=>l?.get("Type")&&u[1](l?.get("Type")),{defer:!1}));let o,i;return E.Editors[0]().set(a,{Type:e,Hidden:E.Editors[0]().size>0,Content:u[0]()}),ue(()=>{o instanceof HTMLElement&&(i=W.create(o,{value:u[0](),language:e.toLowerCase(),automaticLayout:!0,lineNumbers:"off","semanticHighlighting.enabled":"configuredByTheme",autoClosingBrackets:"always",autoIndent:"full",tabSize:4,detectIndentation:!1,useTabStops:!0,minimap:{enabled:!1},scrollbar:{useShadows:!0,horizontal:"hidden",verticalScrollbarSize:10,verticalSliderSize:4,alwaysConsumeMouseWheel:!1},folding:!1,theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"Dark":"Light",wrappingStrategy:"advanced",word:"on",bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!0},padding:{top:12,bottom:12},fixedOverflowWidgets:!0,tabCompletion:"on",acceptSuggestionOnEnter:"on",cursorWidth:5,roundedSelection:!0,matchBrackets:"always",autoSurround:"languageDefined",screenReaderAnnounceInlineSuggestion:!1,renderFinalNewline:"on",selectOnLineNumbers:!1,formatOnType:!0,formatOnPaste:!0,fontFamily:"'Source Code Pro'",fontWeight:"400",fontLigatures:!0,links:!1,fontSize:16}),i.getModel()?.setEOL(W.EndOfLineSequence.LF),i.onKeyDown(l=>{l.ctrlKey&&l.code==="KeyS"&&(l.preventDefault(),k(t),t.element?.submit())}),i.getModel()?.onDidChangeContent(()=>{E.Editors[1](J(E.Editors[0](),new Map([[a,{Content:i.getModel()?.getValue()??"",Hidden:E.Editors[0]()?.get(a)?.Hidden??!0,Type:e}]])))}),i.onDidChangeModelLanguageConfiguration(()=>i.getAction("editor.action.formatDocument")?.run()),i.onDidLayoutChange(()=>i.getAction("editor.action.formatDocument")?.run()),window.addEventListener("load",()=>i.getAction("editor.action.formatDocument")?.run()),setTimeout(()=>i.getAction("editor.action.formatDocument")?.run(),1e3),D(P(u[0],l=>i.getModel()?.setValue(l),{defer:!1})),R.Socket[0]()?.send(JSON.stringify({Key:O.Items[0]()?.get("Key")?.[0](),Identifier:O.Items[0]()?.get("Identifier")?.[0](),From:"Content",View:e})))}),h("div",{class:!E.Editors[0]()?.get(a)?.Hidden&&Me.Data[0]()?.get("Name")?"":"hidden"},h("p",null,"Edit your"," ",h(de,{each:Array.from(E.Editors[0]().entries())},(l,s)=>h(Fragment,null,h(Re,{Action:()=>{E.Editors[0]().forEach((g,d)=>{g.Hidden=l[0]!==d,E.Editors[1](J(E.Editors[0](),new Map([[d,g]])))}),setTimeout(()=>{i.setScrollPosition({scrollTop:-50})},1e3)}},l[1].Type),s()===E.Editors[0]().size-1?"":" / "))," ","here:"),h("br",null),h(n,{method:"post",onSubmit:Ve},h(r,{name:"Content",validate:[Le(`Please enter some ${e}.`)]},(l,s)=>h("div",{class:"w-full"},h("div",{class:"Editor"},h("code",{ref:o,class:"Monaco"}),l.error&&h(Fragment,null,h("div",{class:"Error",onClick:()=>{_e(t,"Content"),i.focus()}},h("span",null,"   ",l.error))),h("input",{...s,value:E.Editors[0]()?.get(a)?.Content??"",type:"hidden",required:!0})))),h(r,{name:"Field"},(l,s)=>h("input",{type:"hidden",...s,value:e}))))};const Pe=e=>{switch(e){case"CSS":return`
/* Example CSS Code */
body {

}			
`;case"HTML":return`
<!-- Example HTML Code -->
<!doctype html>
<html lang="en">
	<body>
	</body>
</html>
`;case"TypeScript":return`
/**
 * Example TypeScript Code
 */
export default () => ({});
`;default:return""}},Ve=({Content:e,Field:t},n)=>{n&&(n.preventDefault(),R.Socket[0]()?.send(JSON.stringify({Key:O.Items[0]()?.get("Key")?.[0](),Identifier:O.Items[0]()?.get("Identifier")?.[0](),To:t,Input:e})))},{default:E}=await w(async()=>{const{default:e}=await import("./Context.DgDnQ0VN.js");return{default:e}},__vite__mapDeps([0,1,2])),{default:R}=await w(async()=>{const{default:e}=await import("./Context.DAtEQyOM.js");return{default:e}},__vite__mapDeps([3,1,2])),{default:Me}=await w(async()=>{const{default:e}=await import("./Context.CPfFLoRl.js");return{default:e}},__vite__mapDeps([4,1,2])),{default:O}=await w(async()=>{const{default:e}=await import("./Context.C9bvCrJZ.js");return{default:e}},__vite__mapDeps([5,1,2])),{default:Re}=await w(async()=>{const{default:e}=await import("./Anchor.Da3TxD1T.js");return{default:e}},__vite__mapDeps([6,7,1,2])),{default:Be}=await w(async()=>{const{default:e}=await import("./Button.D6fOpe17.js");return{default:e}},__vite__mapDeps([8,1,2])),{default:Ke,Fn:We}=await w(async()=>{const{default:e,Fn:t}=await import("./Copy.CbVrE-8U.js");return{default:e,Fn:t}},__vite__mapDeps([9,1,2,10])),{default:J}=await w(async()=>{const{default:e}=await import("./Merge.CvOgcbzx.js");return{default:e}},__vite__mapDeps([7,1,2]));export{E as Action,Re as Anchor,Be as Button,R as Connection,We as Copy,J as Merge,Pe as Return,Me as Session,O as Store,Ke as Tip,Ve as Update,je as default};
//# sourceMappingURL=Editor.4stKNqvH.js.map
